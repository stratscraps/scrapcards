<!DOCTYPE html>
<!-- saved from url=(0020)https://scrap.cards/ -->
<html lang="en" data-nm-theme="light"><nativemind-container data-wxt-shadow-root="" data-testid="nativemind-container" style="overflow: visible; position: fixed; width: 0px; height: 0px; display: block; top: 0px; left: 0px; z-index: calc(infinity);"><template shadowrootmode="open">
<!-- saved from url=(0020)https://scrap.cards/ -->
<html style="position: absolute; top: 0px; left: 0px;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style>/* WXT Shadow Root Reset */ body{all:initial;}</style></head><body><div class="font-inter nativemind-style-boundary" data-v-app=""><div><template shadowrootmode="open"><div class="nativemind-writing-tools nativemind-style-boundary" style="color-scheme: initial; forced-color-adjust: initial; mask: initial; math-depth: initial; position: fixed; position-anchor: initial; text-size-adjust: initial; appearance: initial; color: initial; font: initial; font-palette: initial; font-synthesis: initial; position-area: initial; text-orientation: initial; text-rendering: initial; text-spacing-trim: initial; -webkit-font-smoothing: initial; -webkit-locale: initial; -webkit-text-orientation: initial; -webkit-writing-mode: initial; writing-mode: initial; zoom: initial; accent-color: initial; place-content: initial; place-items: initial; place-self: initial; alignment-baseline: initial; anchor-name: initial; anchor-scope: initial; animation-composition: initial; animation: initial; app-region: initial; aspect-ratio: initial; backdrop-filter: initial; backface-visibility: initial; background: initial; background-blend-mode: initial; baseline-shift: initial; baseline-source: initial; block-size: initial; border-block: initial; border: initial; border-radius: initial; border-collapse: initial; border-end-end-radius: initial; border-end-start-radius: initial; border-inline: initial; border-start-end-radius: initial; border-start-start-radius: initial; bottom: initial; box-decoration-break: initial; box-shadow: initial; box-sizing: initial; break-after: initial; break-before: initial; break-inside: initial; buffered-rendering: initial; caption-side: initial; caret-animation: initial; caret-color: initial; clear: initial; clip: initial; clip-path: initial; clip-rule: initial; color-interpolation: initial; color-interpolation-filters: initial; color-rendering: initial; color-interpolation-filters: initial; color-rendering: initial; columns: initial; column-fill: initial; gap: initial; column-rule: initial; column-span: initial; contain: initial; contain-intrinsic-block-size: initial; contain-intrinsic-size: initial; contain-intrinsic-inline-size: initial; container: initial; content: initial; content-visibility: initial; corner-shape: initial; corner-block-end-shape: initial; corner-block-start-shape: initial; counter-increment: initial; counter-reset: initial; counter-set: initial; cursor: initial; cx: initial; cy: initial; d: initial; display: initial; dominant-baseline: initial; dynamic-range-limit: initial; empty-cells: initial; field-sizing: initial; fill: initial; fill-opacity: initial; fill-rule: initial; filter: initial; flex: initial; flex-flow: initial; float: initial; flood-color: initial; flood-opacity: initial; grid: initial; grid-area: initial; height: 0px; hyphenate-character: initial; hyphenate-limit-chars: initial; hyphens: initial; image-orientation: initial; image-rendering: initial; initial-letter: initial; inline-size: initial; inset-block: initial; inset-inline: initial; interest-delay: initial; interpolate-size: initial; isolation: initial; left: 0px; letter-spacing: initial; lighting-color: initial; line-break: initial; list-style: initial; margin-block: initial; margin: initial; margin-inline: initial; marker: initial; mask-type: initial; math-shift: initial; math-style: initial; max-block-size: initial; max-height: initial; max-inline-size: initial; max-width: initial; min-block-size: initial; min-height: initial; min-inline-size: initial; min-width: initial; mix-blend-mode: initial; object-fit: initial; object-position: initial; object-view-box: initial; offset: initial; opacity: initial; order: initial; orphans: initial; outline: initial; outline-offset: initial; overflow-anchor: initial; overflow-block: initial; overflow-clip-margin: initial; overflow-inline: initial; overflow-wrap: initial; overflow: initial; overlay: initial; overscroll-behavior-block: initial; overscroll-behavior-inline: initial; overscroll-behavior: initial; padding-block: initial; padding: initial; padding-inline: initial; page: initial; page-orientation: initial; paint-order: initial; perspective: initial; perspective-origin: initial; pointer-events: initial; position-try: initial; position-visibility: initial; print-color-adjust: initial; quotes: initial; r: initial; reading-flow: initial; reading-order: initial; resize: initial; right: initial; rotate: initial; ruby-align: initial; ruby-position: initial; rx: initial; ry: initial; scale: initial; scroll-behavior: initial; scroll-initial-target: initial; scroll-margin-block: initial; scroll-margin: initial; scroll-margin-inline: initial; scroll-marker-group: initial; scroll-padding-block: initial; scroll-padding: initial; scroll-padding-inline: initial; scroll-snap-align: initial; scroll-snap-stop: initial; scroll-snap-type: initial; scroll-target-group: initial; scroll-timeline: initial; scrollbar-color: initial; scrollbar-gutter: initial; scrollbar-width: initial; shape-image-threshold: initial; shape-margin: initial; shape-outside: initial; shape-rendering: initial; size: initial; speak: initial; stop-color: initial; stop-opacity: initial; stroke: initial; stroke-dasharray: initial; stroke-dashoffset: initial; stroke-linecap: initial; stroke-linejoin: initial; stroke-miterlimit: initial; stroke-opacity: initial; stroke-width: initial; tab-size: initial; table-layout: initial; text-align: initial; text-align-last: initial; text-anchor: initial; text-autospace: initial; text-box: initial; text-combine-upright: initial; text-decoration: initial; text-decoration-skip-ink: initial; text-emphasis: initial; text-emphasis-position: initial; text-indent: initial; text-overflow: initial; text-shadow: initial; text-transform: initial; text-underline-offset: initial; text-underline-position: initial; text-wrap: initial; timeline-scope: initial; top: 0px; touch-action: initial; transform: initial; transform-box: initial; transform-origin: initial; transform-style: initial; transition: initial; translate: initial; user-select: initial; vector-effect: initial; vertical-align: initial; view-timeline: initial; view-transition-class: initial; view-transition-group: initial; view-transition-name: initial; visibility: initial; border-spacing: initial; -webkit-box-align: initial; -webkit-box-decoration-break: initial; -webkit-box-direction: initial; -webkit-box-flex: initial; -webkit-box-ordinal-group: initial; -webkit-box-orient: initial; -webkit-box-pack: initial; -webkit-box-reflect: initial; -webkit-line-break: initial; -webkit-line-clamp: initial; -webkit-mask-box-image: initial; -webkit-rtl-ordering: initial; -webkit-ruby-position: initial; -webkit-tap-highlight-color: initial; -webkit-text-combine: initial; -webkit-text-decorations-in-effect: initial; -webkit-text-fill-color: initial; -webkit-text-security: initial; -webkit-text-stroke: initial; -webkit-user-drag: initial; white-space-collapse: initial; widows: initial; width: 0px; will-change: initial; word-break: initial; word-spacing: initial; x: initial; y: initial; z-index: initial;"><div class="container bg-bg-primary text-text-primary font-inter" data-nm-theme="light"></div></div></template></div><div><template shadowrootmode="open"><div class="nativemind-gmail-tools nativemind-style-boundary" style="color-scheme: initial; forced-color-adjust: initial; mask: initial; math-depth: initial; position: fixed; position-anchor: initial; text-size-adjust: initial; appearance: initial; color: initial; font: initial; font-palette: initial; font-synthesis: initial; position-area: initial; text-orientation: initial; text-rendering: initial; text-spacing-trim: initial; -webkit-font-smoothing: initial; -webkit-locale: initial; -webkit-text-orientation: initial; -webkit-writing-mode: initial; writing-mode: initial; zoom: initial; accent-color: initial; place-content: initial; place-items: initial; place-self: initial; alignment-baseline: initial; anchor-name: initial; anchor-scope: initial; animation-composition: initial; animation: initial; app-region: initial; aspect-ratio: initial; backdrop-filter: initial; backface-visibility: initial; background: initial; background-blend-mode: initial; baseline-shift: initial; baseline-source: initial; block-size: initial; border-block: initial; border: initial; border-radius: initial; border-collapse: initial; border-end-end-radius: initial; border-end-start-radius: initial; border-inline: initial; border-start-end-radius: initial; border-start-start-radius: initial; bottom: initial; box-decoration-break: initial; box-shadow: initial; box-sizing: initial; break-after: initial; break-before: initial; break-inside: initial; buffered-rendering: initial; caption-side: initial; caret-animation: initial; caret-color: initial; clear: initial; clip: initial; clip-path: initial; clip-rule: initial; color-interpolation: initial; color-interpolation-filters: initial; color-rendering: initial; columns: initial; column-fill: initial; gap: initial; column-rule: initial; column-span: initial; contain: initial; contain-intrinsic-block-size: initial; contain-intrinsic-size: initial; contain-intrinsic-inline-size: initial; container: initial; content: initial; content-visibility: initial; corner-shape: initial; corner-block-end-shape: initial; corner-block-start-shape: initial; counter-increment: initial; counter-reset: initial; counter-set: initial; cursor: initial; cx: initial; cy: initial; d: initial; display: initial; dominant-baseline: initial; dynamic-range-limit: initial; empty-cells: initial; field-sizing: initial; fill: initial; fill-opacity: initial; fill-rule: initial; filter: initial; flex: initial; flex-flow: initial; float: initial; flood-color: initial; flood-opacity: initial; grid: initial; grid-area: initial; height: 0px; hyphenate-character: initial; hyphenate-limit-chars: initial; hyphens: initial; image-orientation: initial; image-rendering: initial; initial-letter: initial; inline-size: initial; inset-block: initial; inset-inline: initial; interest-delay: initial; interpolate-size: initial; isolation: initial; left: 0px; letter-spacing: initial; lighting-color: initial; line-break: initial; list-style: initial; margin-block: initial; margin: initial; margin-inline: initial; marker: initial; mask-type: initial; math-shift: initial; math-style: initial; max-block-size: initial; max-height: initial; max-inline-size: initial; max-width: initial; min-block-size: initial; min-height: initial; min-inline-size: initial; min-width: initial; mix-blend-mode: initial; object-fit: initial; object-position: initial; object-view-box: initial; offset: initial; opacity: initial; order: initial; orphans: initial; outline: initial; outline-offset: initial; overflow-anchor: initial; overflow-block: initial; overflow-clip-margin: initial; overflow-inline: initial; overflow-wrap: initial; overflow: initial; overlay: initial; overscroll-behavior-block: initial; overscroll-behavior-inline: initial; overscroll-behavior: initial; padding-block: initial; padding: initial; padding-inline: initial; page: initial; page-orientation: initial; paint-order: initial; perspective: initial; perspective-origin: initial; pointer-events: initial; position-try: initial; position-visibility: initial; print-color-adjust: initial; quotes: initial; r: initial; reading-flow: initial; reading-order: initial; resize: initial; right: initial; rotate: initial; ruby-align: initial; ruby-position: initial; rx: initial; ry: initial; scale: initial; scroll-behavior: initial; scroll-initial-target: initial; scroll-margin-block: initial; scroll-margin: initial; scroll-margin-inline: initial; scroll-marker-group: initial; scroll-padding-block: initial; scroll-padding: initial; scroll-padding-inline: initial; scroll-snap-align: initial; scroll-snap-stop: initial; scroll-snap-type: initial; scroll-target-group: initial; scroll-timeline: initial; scrollbar-color: initial; scrollbar-gutter: initial; scrollbar-width: initial; shape-image-threshold: initial; shape-margin: initial; shape-outside: initial; shape-rendering: initial; size: initial; speak: initial; stop-color: initial; stop-opacity: initial; stroke: initial; stroke-dasharray: initial; stroke-dashoffset: initial; stroke-linecap: initial; stroke-linejoin: initial; stroke-miterlimit: initial; stroke-opacity: initial; stroke-width: initial; tab-size: initial; table-layout: initial; text-align: initial; text-align-last: initial; text-anchor: initial; text-autospace: initial; text-box: initial; text-combine-upright: initial; text-decoration: initial; text-decoration-skip-ink: initial; text-emphasis: initial; text-emphasis-position: initial; text-indent: initial; text-overflow: initial; text-shadow: initial; text-transform: initial; text-underline-offset: initial; text-underline-position: initial; text-wrap: initial; timeline-scope: initial; top: 0px; touch-action: initial; transform: initial; transform-box: initial; transform-origin: initial; transform-style: initial; transition: initial; translate: initial; user-select: initial; vector-effect: initial; vertical-align: initial; view-timeline: initial; view-transition-class: initial; view-transition-group: initial; view-transition-name: initial; visibility: initial; border-spacing: initial; -webkit-box-align: initial; -webkit-box-decoration-break: initial; -webkit-box-direction: initial; -webkit-box-flex: initial; -webkit-box-ordinal-group: initial; -webkit-box-orient: initial; -webkit-box-pack: initial; -webkit-box-reflect: initial; -webkit-line-break: initial; -webkit-line-clamp: initial; -webkit-mask-box-image: initial; -webkit-rtl-ordering: initial; -webkit-ruby-position: initial; -webkit-tap-highlight-color: initial; -webkit-text-combine: initial; -webkit-text-decorations-in-effect: initial; -webkit-text-fill-color: initial; -webkit-text-security: initial; -webkit-text-stroke: initial; -webkit-user-drag: initial; white-space-collapse: initial; widows: initial; width: 0px; will-change: initial; word-break: initial; word-spacing: initial; x: initial; y: initial; z-index: initial;"><div class="container bg-bg-primary text-text-primary font-inter" data-nm-theme="light"><!----><!----></div></div></template></div></div><div data-v-app=""><!----></div></body></html></template></nativemind-container><head>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Strategy Inspiration Generator</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&display=swap');
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'IBM Plex Mono',monospace;background:#fafafa}
@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
</style>
</head>
<body>
<div id="root"></div>

<!-- Add Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

<script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script type="text/babel">

// Firebase configuration
const firebaseConfig = {
  apiKey: "AIzaSyCq8PaIr0TcEGsRRa3Jjq-ifPCAVDAkvak",
  authDomain: "scrapcards-f89b9.firebaseapp.com",
  databaseURL: "https://scrapcards-f89b9-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "scrapcards-f89b9",
  storageBucket: "scrapcards-f89b9.firebasestorage.app",
  messagingSenderId: "113010862060",
  appId: "1:113010862060:web:5533f4e82c19214e7ec2c9"
};

// Initialize Firebase
firebase.initializeApp(firebaseConfig);
const database = firebase.database();

const{useState,useEffect,useCallback,useRef}=React;

const PROMPTS = [
{id:1, prompt:"Think about...", explanation:"Every great strategy starts with a clear thought."},
{id:2, prompt:"What if we...", explanation:"Innovation comes from questioning the status quo."},
{id:3, prompt:"The real opportunity is...", explanation:"Look beyond the obvious to find breakthrough insights."},
{id:4, prompt:"Nobody has noticed that...", explanation:"The best strategies exploit overlooked truths."},
{id:5, prompt:"The tension between...", explanation:"Great strategies resolve fundamental conflicts."},
{id:6, prompt:"We should stop pretending...", explanation:"Honesty about reality enables breakthrough thinking."},
{id:7, prompt:"The category is actually about...", explanation:"Reframing the category unlocks new strategies."},
{id:8, prompt:"Culture is moving toward...", explanation:"Anticipate where society is heading, not where it's been."},
{id:9, prompt:"The unspoken truth is...", explanation:"Address what everyone thinks but nobody says."},
{id:10, prompt:"Instead of competing on...", explanation:"Change the game rather than playing harder."}
];

const App=()=>{
const[currentView,setCurrentView]=useState('home');
const[currentCard,setCurrentCard]=useState(null);
const[customItems,setCustomItems]=useState([]);
const[prompts,setPrompts]=useState(PROMPTS);
const[rotatingIcons,setRotatingIcons]=useState([]);
const[adminPassword,setAdminPassword]=useState('');
const[isAuthenticated,setIsAuthenticated]=useState(false);
const[enteredPassword,setEnteredPassword]=useState('');
const[showPasswordModal,setShowPasswordModal]=useState(false);
const[addingNewItem,setAddingNewItem]=useState(false);
const[editingItem,setEditingItem]=useState(null);
const[newItem,setNewItem]=useState({prompt:'',explanation:'',category:'prompt'});
const[categories,setCategories]=useState(['prompt','principle','question','truth']);
const[newCategory,setNewCategory]=useState('');
const[showingAddCategory,setShowingAddCategory]=useState(false);
const[imageUpload,setImageUpload]=useState(null);
const[imagePreview,setImagePreview]=useState(null);
const[uploadingIcon,setUploadingIcon]=useState(false);
const[newIconImage,setNewIconImage]=useState(null);
const[newIconPreview,setNewIconPreview]=useState(null);
const[searchTerm,setSearchTerm]=useState('');
const[selectedCategory,setSelectedCategory]=useState('all');
const[sortBy,setSortBy]=useState('newest');
const fileInputRef=useRef(null);
const iconFileInputRef=useRef(null);
const[icons,setIcons]=useState([
{emoji:'ðŸ’¡',label:'Lightbulb'},
{emoji:'ðŸŽ¯',label:'Target'},
{emoji:'ðŸš€',label:'Rocket'},
{emoji:'âœ¨',label:'Sparkles'},
{emoji:'ðŸ’­',label:'Thought'},
{emoji:'ðŸ”',label:'Magnifying Glass'},
{emoji:'ðŸ“ˆ',label:'Chart'},
{emoji:'ðŸŽ¨',label:'Palette'},
{emoji:'ðŸ†',label:'Trophy'},
{emoji:'ðŸ’ª',label:'Muscle'},
{emoji:'ðŸŒŸ',label:'Star'},
{emoji:'ðŸ”®',label:'Crystal Ball'}
]);

// Load data from localStorage and Firebase on mount
useEffect(()=>{
  // Load local data
  const stored=localStorage.getItem('customItems');
  if(stored){
    try{
      setCustomItems(JSON.parse(stored));
    }catch(e){
      console.error('Error loading custom items:',e);
    }
  }
  
  const storedPrompts=localStorage.getItem('prompts');
  if(storedPrompts){
    try{
      setPrompts(JSON.parse(storedPrompts));
    }catch(e){
      console.error('Error loading prompts:',e);
      setPrompts(PROMPTS);
    }
  }
  
  const storedPassword=localStorage.getItem('adminPassword');
  if(storedPassword)setAdminPassword(storedPassword);
  
  const storedCategories=localStorage.getItem('categories');
  if(storedCategories){
    try{
      setCategories(JSON.parse(storedCategories));
    }catch(e){
      console.error('Error loading categories:',e);
    }
  }
  
  // Load rotating icons from Firebase
  const iconsRef = database.ref('rotatingIcons');
  iconsRef.on('value', (snapshot) => {
    const data = snapshot.val();
    if (data) {
      // Convert Firebase object to array
      const iconsArray = Object.keys(data).map(key => ({
        ...data[key],
        id: key
      }));
      setRotatingIcons(iconsArray);
    } else {
      setRotatingIcons([]);
    }
  });
  
  // Cleanup listener on unmount
  return () => {
    iconsRef.off();
  };
},[]);

// Save rotating icons to Firebase instead of localStorage
const saveRotatingIconsToFirebase = async (icons) => {
  try {
    // Clear existing icons
    await database.ref('rotatingIcons').remove();
    
    // Save new icons
    const updates = {};
    icons.forEach(icon => {
      const key = icon.id || database.ref('rotatingIcons').push().key;
      updates[`rotatingIcons/${key}`] = {
        src: icon.src,
        label: icon.label
      };
    });
    
    await database.ref().update(updates);
  } catch (error) {
    console.error('Error saving to Firebase:', error);
    alert('Error saving icons. Please try again.');
  }
};

// Update the handleIconUpload function
const handleIconUpload=(e)=>{
  const file=e.target.files[0];
  if(file){
    if(!file.type.startsWith('image/')){
      alert('Please upload an image file');
      return;
    }
    if(file.size>5000000){
      alert('Image must be less than 5MB');
      return;
    }
    setNewIconImage(file);
    const reader=new FileReader();
    reader.onloadend=()=>{
      setNewIconPreview(reader.result);
    };
    reader.readAsDataURL(file);
  }
};

// Update the handleAddIcon function
const handleAddIcon=async()=>{
  if(!newIconPreview)return;
  const label=prompt('Enter a label for this icon:');
  if(!label)return;
  
  const newIcon={
    id: Date.now().toString(),
    src:newIconPreview,
    label:label
  };
  
  const updatedIcons=[...rotatingIcons,newIcon];
  setRotatingIcons(updatedIcons);
  await saveRotatingIconsToFirebase(updatedIcons);
  
  setNewIconImage(null);
  setNewIconPreview(null);
  setUploadingIcon(false);
};

// Update the removeIcon function
const removeIcon=async(indexToRemove)=>{
  const updatedIcons=rotatingIcons.filter((_,index)=>index!==indexToRemove);
  setRotatingIcons(updatedIcons);
  await saveRotatingIconsToFirebase(updatedIcons);
};

useEffect(()=>{
  if(customItems.length>0){
    localStorage.setItem('customItems',JSON.stringify(customItems));
  }
},[customItems]);

useEffect(()=>{
  if(prompts.length>0){
    localStorage.setItem('prompts',JSON.stringify(prompts));
  }
},[prompts]);

useEffect(()=>{
  if(categories.length>0){
    localStorage.setItem('categories',JSON.stringify(categories));
  }
},[categories]);

const shuffleCards=useCallback(()=>{
  const allItems=[...prompts,...customItems];
  if(allItems.length===0)return;
  const filtered=searchTerm||selectedCategory!=='all'?allItems.filter(item=>{
    const matchesSearch=!searchTerm||item.prompt.toLowerCase().includes(searchTerm.toLowerCase())||item.explanation.toLowerCase().includes(searchTerm.toLowerCase());
    const matchesCategory=selectedCategory==='all'||item.category===selectedCategory||(selectedCategory==='prompt'&&!item.category);
    return matchesSearch&&matchesCategory;
  }):allItems;
  if(filtered.length===0){
    setCurrentCard(null);
    return;
  }
  let sorted=[...filtered];
  if(sortBy==='newest'){
    sorted.sort((a,b)=>(b.id||0)-(a.id||0));
  }else if(sortBy==='oldest'){
    sorted.sort((a,b)=>(a.id||0)-(b.id||0));
  }else if(sortBy==='alphabetical'){
    sorted.sort((a,b)=>a.prompt.localeCompare(b.prompt));
  }
  const randomIndex=Math.floor(Math.random()*sorted.length);
  setCurrentCard(sorted[randomIndex]);
},[prompts,customItems,searchTerm,selectedCategory,sortBy]);

useEffect(()=>{
  if(currentView==='home'){
    shuffleCards();
    const interval=setInterval(shuffleCards,8000);
    return()=>clearInterval(interval);
  }
},[currentView,shuffleCards]);

const handlePasswordSubmit=()=>{
  if(enteredPassword===adminPassword){
    setIsAuthenticated(true);
    setShowPasswordModal(false);
    setEnteredPassword('');
  }else{
    alert('Incorrect password');
    setEnteredPassword('');
  }
};

const handlePasswordSet=()=>{
  const newPass=prompt('Set admin password:');
  if(newPass){
    setAdminPassword(newPass);
    localStorage.setItem('adminPassword',newPass);
    alert('Password set successfully');
  }
};

const handleImageUpload=(e)=>{
  const file=e.target.files[0];
  if(file){
    if(!file.type.startsWith('image/')){
      alert('Please upload an image file');
      return;
    }
    if(file.size>5000000){
      alert('Image must be less than 5MB');
      return;
    }
    setImageUpload(file);
    const reader=new FileReader();
    reader.onloadend=()=>{
      setImagePreview(reader.result);
    };
    reader.readAsDataURL(file);
  }
};

const handleAddItem=()=>{
  if(!newItem.prompt||!newItem.explanation)return;
  const item={
    ...newItem,
    id:Date.now(),
    image:imagePreview||null
  };
  setCustomItems([...customItems,item]);
  setNewItem({prompt:'',explanation:'',category:'prompt'});
  setAddingNewItem(false);
  setImagePreview(null);
  setImageUpload(null);
};

const handleUpdateItem=()=>{
  if(!editingItem.prompt||!editingItem.explanation)return;
  const updatedItem={...editingItem,image:imagePreview||editingItem.image};
  if(editingItem.isDefault){
    setPrompts(prompts.map(p=>p.id===editingItem.id?updatedItem:p));
  }else{
    setCustomItems(customItems.map(item=>item.id===editingItem.id?updatedItem:item));
  }
  setEditingItem(null);
  setImagePreview(null);
  setImageUpload(null);
};

const handleDeleteItem=(id,isDefault=false)=>{
  if(!confirm('Delete this item?'))return;
  if(isDefault){
    setPrompts(prompts.filter(p=>p.id!==id));
  }else{
    setCustomItems(customItems.filter(item=>item.id!==id));
  }
};

const handleAddCategory=()=>{
  if(!newCategory||categories.includes(newCategory.toLowerCase()))return;
  const updated=[...categories,newCategory.toLowerCase()];
  setCategories(updated);
  setNewCategory('');
  setShowingAddCategory(false);
};

const RotatingIcon=({icon,index})=>{
  const delay=index*0.1;
  return<div style={{
    position:'absolute',
    fontSize:'80px',
    opacity:0.03,
    animation:`float${index%3+1} ${20+index*2}s infinite`,
    animationDelay:`${delay}s`,
    left:`${(index*20)%100}%`,
    top:`${(index*30)%100}%`,
    transform:'translate(-50%,-50%)',
    pointerEvents:'none',
    userSelect:'none'
  }}>
    {icon.src?<img src={icon.src} alt={icon.label} style={{width:'80px',height:'80px',opacity:0.3}}/>:icon.emoji}
  </div>
};

const styles=`
@keyframes float1{
  0%,100%{transform:translate(-50%,-50%)rotate(0deg)scale(1)}
  50%{transform:translate(-50%,-50%)rotate(180deg)scale(1.1)}
}
@keyframes float2{
  0%,100%{transform:translate(-50%,-50%)rotate(0deg)scale(1)}
  33%{transform:translate(-50%,-50%)rotate(120deg)scale(0.9)}
  66%{transform:translate(-50%,-50%)rotate(240deg)scale(1.1)}
}
@keyframes float3{
  0%,100%{transform:translate(-50%,-50%)rotate(0deg)scale(1)}
  25%{transform:translate(-50%,-50%)rotate(90deg)scale(1.05)}
  50%{transform:translate(-50%,-50%)rotate(180deg)scale(0.95)}
  75%{transform:translate(-50%,-50%)rotate(270deg)scale(1.05)}
}
`;

return<div style={{minHeight:'100vh',background:'#fafafa',display:'flex',justifyContent:'center',alignItems:'center',padding:'20px',position:'relative',overflow:'hidden'}}>
<style>{styles}</style>

{/* Floating Icons Background */}
{currentView==='home'&&(
  <div style={{position:'absolute',inset:0,overflow:'hidden',pointerEvents:'none'}}>
    {[...icons,...rotatingIcons].map((icon,index)=>(
      <RotatingIcon key={index} icon={icon} index={index}/>
    ))}
  </div>
)}

{currentView==='home'&&<div style={{maxWidth:'800px',width:'100%',textAlign:'center',position:'relative',zIndex:1}}>
  <div style={{marginBottom:'80px',animation:'fadeIn 0.5s ease-out'}}>
    <h1 style={{fontSize:'clamp(32px,5vw,48px)',fontWeight:'600',margin